#!/usr/bin/env bash
set -e

DOTFILES_DIR="${HOME}/.dotfiles"

if type git; then
  : # You have git command. No Problem
else
  echo "Please install git command!"
  exit 1;
fi

echo ""
echo "Start fetch dotfiles..."

if [ ! -d "${DOTFILES_DIR}" ]; then
  mkdir -p "${DOTFILES_DIR}"
  git clone git@github.com:ryog/dotfiles.git "${DOTFILES_DIR}"
else
  echo "TODO: Add comment"
fi

echo "Done."
echo ""
echo "Start symbolic link dotfiles..."

[ ! -d "${HOME}/.config" ] && mkdir -p "${HOME}/config"
[ ! -d "${HOME}/.vim" ] && mkdir -p "${HOME}/.vim"

ln -vsf "${DOTFILES_DIR}/bash_aliases" "${HOME}/.bash_aliases"
ln -vsf "${DOTFILES_DIR}/bash_profile" "${HOME}/.bash_profile"
ln -vsf "${DOTFILES_DIR}/bashrc" "${HOME}/.bashrc"
ln -vsf "${DOTFILES_DIR}/ctags" "${HOME}/.ctags"
ln -vsf "${DOTFILES_DIR}/gemrc" "${HOME}/.gemrc"
ln -vsf "${DOTFILES_DIR}/gitconfig" "${HOME}/.gitconfig"
ln -vsf "${DOTFILES_DIR}/gitignore" "${HOME}/.gitignore"
ln -vsf "${DOTFILES_DIR}/railsrc" "${HOME}/.railsrc"
ln -vsf "${DOTFILES_DIR}/rubocop.yml" "${HOME}/.rubocop.yml"
ln -vsf "${DOTFILES_DIR}/tmux.conf" "${HOME}/.tmux.conf"
ln -vsf "${DOTFILES_DIR}/vimrc" "${HOME}/.vimrc"
ln -vsf "${DOTFILES_DIR}/vim/neobundle.toml" "${HOME}/.vim/neobundle.toml"
ln -vsf "${DOTFILES_DIR}/vim/neobundlelazy.toml" "${HOME}/.vim/neobundlelazy.toml"
ln -vsf "${DOTFILES_DIR}/vim/plugins.rc.vim" "${HOME}/.vim/plugins.rc.vim"
ln -vsf "${DOTFILES_DIR}/vim" "${HOME}/.config/nvim"
ln -vsf "${DOTFILES_DIR}/vimrc" "${HOME}/.config/nvim/init.vim"

echo "Done."
echo ""
echo "Start install NeoBundle"

if [ ! -d "${HOME}/.vim/bundle/neobundle.vim" ]; then
  curl https://raw.githubusercontent.com/Shougo/neobundle.vim/master/bin/install.sh | sh
else
  echo "TODO: Add comment"
fi

echo "Done."
echo ""
echo "Complete setup dotfiles!"
